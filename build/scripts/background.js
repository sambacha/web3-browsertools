const devtoolsPorts={},contentPorts={};chrome.runtime.onConnect.addListener(e=>{if(e.name.startsWith("usedapp-panel-")){let s=function(a){contentPorts[n]&&contentPorts[n].postMessage(a)};var t=s;const n=parseInt(e.name.substring("usedapp-panel-".length));devtoolsPorts[n]=e,e.onMessage.addListener(s),e.onDisconnect.addListener(()=>{e.onMessage.removeListener(s),delete devtoolsPorts[n]})}else if(e.name==="usedapp-content"){let s=function(o){devtoolsPorts[n]&&devtoolsPorts[n].postMessage(o)};var t=s;const n=e.sender.tab.id;contentPorts[n]=e,e.onMessage.addListener(s),e.onDisconnect.addListener(()=>{e.onMessage.removeListener(s),delete contentPorts[n]})}}),chrome.runtime.onMessage.addListener((e,t)=>{t.tab&&e.useDAppDetected&&(chrome.browserAction.setIcon({tabId:t.tab.id,path:"icons/icon.svg"}),chrome.browserAction.setPopup({tabId:t.tab.id,popup:"popup/popup.html"}))});
